{"version":3,"sources":["main.js"],"names":["$","document","ready","moment","locale","attr","$body","$sidebar","$menuShow","$searchShow","$usersShow","$menuClose","$searchClose","$overlay","$ghostSearchField","sidebar","toggleClass","search","hasClass","val","setTimeout","focus","users","closeAny","scrollTop","add","on","hotkeys","filter","event","tagName","target","srcElement","setScope","test","handler","window","width","$currentSub","this","next","not","hide","toggle","resize","show","searchKey","searchUrl","css","GhostSearch","key","url","api","resource","parameters","fields","template","result","location","protocol","host","join","slug","title","published_at","format","text","Date"],"mappings":"AAAAA,EAAEC,UAAUC,OAAM,WAChBC,OAAOC,OAAOJ,EAAE,QAAQK,KAAK,SAE7B,IAAIC,EAAQN,EAAE,QAEVO,EAAWP,EAAE,YAEbQ,EAAYR,EAAE,cACdS,EAAcT,EAAE,gBAChBU,EAAaV,EAAE,eAEfW,EAAaX,EAAE,eACfY,EAAeZ,EAAE,iBAEjBa,EAAWb,EAAE,YAEbc,EAAoBd,EAAE,uBAE1B,SAASe,IACPT,EAAMU,YAAY,kBAGpB,SAASC,IACHX,EAAMY,SAAS,iBAKjBlB,EAAE,uBAAuBmB,IAAI,IAJ7BC,YAAW,WACTpB,EAAE,uBAAuBqB,UACxB,KAILf,EAAMU,YAAY,iBAGpB,SAASM,IACPhB,EAAMU,YAAY,gBAepB,SAASO,IACHjB,EAAMY,SAAS,oBACjBX,EAASiB,UAAU,GACnBT,KAGET,EAAMY,SAAS,mBACjBJ,EAAkBK,IAAI,IACtBF,KAGEX,EAAMY,SAAS,iBACjBI,IAoDJ,GA5EAd,EAAUiB,IAAId,GAAYe,GAAG,SAAS,WACpCX,OAGFN,EAAYiB,GAAG,SAAS,WACtBT,OAGFP,EAAWgB,GAAG,SAAS,WACrBJ,OAmBFV,EAAac,GAAG,SAAS,WACvBH,OAGFV,EAASa,GAAG,SAAS,WACnBH,OAGFI,QAAQC,OAAS,SAASC,GACxB,IAAIC,GAAWD,EAAME,QAAUF,EAAMG,YAAYF,QAEjD,OADAH,QAAQM,SAAS,4BAA4BC,KAAKJ,GAAW,QAAU,UAChE,GAGTH,QAAQ,OAAO,SAASE,EAAOM,GAC7BZ,OAGFI,QAAQ,SAAS,SAASE,EAAOM,GAC/BlB,OAGFU,QAAQ,SAAS,SAASE,EAAOM,GAC/BpB,OAGFf,EAAE,oBAAoB0B,GAAG,SAAS,WAChC,GAAI1B,EAAEoC,QAAQC,QAAU,IAAK,CAC3B,IAAIC,EAActC,EAAEuC,MAAMC,KAAK,kBAE/BxC,EAAE,kBAAkByC,IAAIH,GAAaI,OAErCJ,EAAYK,aAYhB3C,EAAEoC,QAAQQ,QAAO,WAPX5C,EAAEoC,QAAQC,SAAW,IACvBrC,EAAE,kBAAkB6C,OAEpB7C,EAAE,kBAAkB0C,UAQC,oBAAdI,WAAkD,oBAAdC,UAA2B,CACxE/C,EAAE,kBAAkBgD,IAAI,UAAW,SAEjB,IAAIC,YAAY,CAChCC,IAAKJ,UACLK,IAAKJ,UACLK,IAAK,CACHC,SAAU,QACVC,WAAY,CACVC,OAAQ,CAAC,QAAS,OAAQ,kBAG9BC,SAAU,SAASC,GAEjB,MAAO,gEADG,CAACC,SAASC,SAAU,KAAMD,SAASE,MAAMC,KAAK,IACuB,WAAaJ,EAAOK,KAAO,qCAAuCL,EAAOM,MAAQ,wCAA0C5D,OAAOsD,EAAOO,cAAcC,OAAO,gBAAkB,sBAKrQjE,EAAE,mBAAmBkE,KAAK/D,OAAO,IAAIgE,MAAQF,OAAO","file":"main.js","sourcesContent":["$(document).ready(function() {\n  moment.locale($(\"html\").attr(\"lang\"));\n\n  let $body = $(\"body\");\n\n  let $sidebar = $(\".sidebar\");\n\n  let $menuShow = $(\"#menu-show\");\n  let $searchShow = $(\"#search-show\");\n  let $usersShow = $(\"#users-show\");\n\n  let $menuClose = $(\"#menu-close\");\n  let $searchClose = $(\"#search-close\");\n\n  let $overlay = $(\".overlay\");\n\n  let $ghostSearchField = $(\"#ghost-search-field\");\n\n  function sidebar() {\n    $body.toggleClass(\"sidebar-opened\");\n  }\n\n  function search() {\n    if(!$body.hasClass(\"search-opened\")) {\n      setTimeout(function() {\n        $(\"#ghost-search-field\").focus()\n      }, 100);\n    } else {\n      $(\"#ghost-search-field\").val(\"\")\n    }\n    $body.toggleClass(\"search-opened\");\n  }\n\n  function users() {\n    $body.toggleClass(\"users-opened\");\n  }\n\n  $menuShow.add($menuClose).on(\"click\", function() {\n    sidebar();\n  });\n\n  $searchShow.on(\"click\", function() {\n    search();\n  });\n\n  $usersShow.on(\"click\", function() {\n    users();\n  });\n\n  function closeAny() {\n    if ($body.hasClass(\"sidebar-opened\")) {\n      $sidebar.scrollTop(0);\n      sidebar();\n    }\n\n    if ($body.hasClass(\"search-opened\")) {\n      $ghostSearchField.val(\"\");\n      search();\n    }\n\n    if ($body.hasClass(\"users-opened\")) {\n      users();\n    }\n  }\n\n  $searchClose.on(\"click\", function() {\n    closeAny();\n  });\n\n  $overlay.on(\"click\", function() {\n    closeAny();\n  });\n\n  hotkeys.filter = function(event){\n    var tagName = (event.target || event.srcElement).tagName;\n    hotkeys.setScope(/^(INPUT|TEXTAREA|SELECT)$/.test(tagName) ? 'input' : 'other');\n    return true;\n  }\n\n  hotkeys('esc', function(event, handler) {\n    closeAny();\n  });\n\n  hotkeys('alt+f', function(event, handler) {\n    search();\n  });\n\n  hotkeys('alt+m', function(event, handler) {\n    sidebar();\n  });\n\n  $(\".accordion-title\").on(\"click\", function() {\n    if ($(window).width() < 900) {\n      let $currentSub = $(this).next(\".accordion-sub\");\n\n      $(\".accordion-sub\").not($currentSub).hide();\n\n      $currentSub.toggle();\n    }\n  });\n\n  function sizes() {\n    if ($(window).width() >= 900) {\n      $(\".accordion-sub\").show()\n    } else {\n      $(\".accordion-sub\").hide()\n    }\n  }\n\n  $(window).resize(function() {\n    sizes();\n  });\n\n  if (typeof searchKey !== 'undefined' && typeof searchUrl !== 'undefined') {\n    $(\".search-action\").css(\"display\", \"block\");\n\n    let ghostSearch = new GhostSearch({\n      key: searchKey,\n      url: searchUrl,\n      api: {\n        resource: 'posts',\n        parameters: {\n          fields: ['title', 'slug', 'published_at'],\n        },\n      },\n      template: function(result) {\n        let url = [location.protocol, '//', location.host].join('');\n        return '<div class=\"ghost-result\"><a class=\"ghost-result-link\" href=\"' + url + '/global/' + result.slug + '\"><div class=\"ghost-result-title\">' + result.title + '</div><div class=\"ghost-result-date\">' + moment(result.published_at).format(\"MMM DD, YYYY\") + '</div></a></div>';\n      }\n    });\n  }\n\n  $(\".site-date span\").text(moment(new Date()).format(\"dddd, MMMM DD, YYYY\"));\n\n});\n"]}